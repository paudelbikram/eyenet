<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>eyenet</title>

    <link href="./assets/dist/css/bootstrap.min.css" rel="stylesheet">
  </head>
  <body>
    
<nav class="navbar navbar-expand-sm navbar-dark fixed-top bg-dark">
  <div class="container-fluid">
    <a class="navbar-brand" href="#">eyenet</a>
  </div>
</nav>

<div class="container mt-5 p-1">
  <br/>
  <div class="justify-content-center">
    <p>
      Please try out provided examples. These will train and test neural net with respective data. 
      You can learn more about these examples <a href="#provideddataset" ><span>here</span></a>
    </p>
    <div class="container">
      <div class="form-check form-check-inline">
        <input class="form-check-input" type="radio" name="inlineRadioOptions" id="xor-data" value="option1" onclick="xorDataSelected()">
        <label class="form-check-label" for="xor-data">XOR</label>
      </div>
      <div class="form-check form-check-inline">
        <input class="form-check-input" type="radio" name="inlineRadioOptions" id="iris-data" value="option2" onclick="irisDataSelected()">
        <label class="form-check-label" for="iris-data">Iris Flower</label>
      </div>
      <span id="data-selection-inprogress" class="badge text-bg-info d-none">Inprogress...</span>
      <span id="data-selection-completed" class="badge text-bg-success d-none">Completed</span>
    </div>
    
  </div>

  <hr/>
  <p>
    <button type="button" class="btn btn-link" data-bs-toggle="collapse" data-bs-target="#customNet" 
    aria-expanded="false" aria-controls="customNet">Customize Neural Net Data</button>
  </p>

  <div class="bg-light p-3 rounded">
    <div class="row collapse" id="customNet">
      <div class="col p-2 border border-secondary">
        <h6>Create Neural Network</h6>
        <form  novalidate onsubmit="createButtonPressed(event)">
          <div class="row mb-3">
            <label for="layers" class="col-sm-4 col-form-label">Layers</label>
            <div class="col-sm-8">
              <input type="text" class="form-control border border-secondary" 
              data-toggle="tooltip" data-placement="top" 
              title="Provide comma separated numbers. This is number of nodes in layers starting 
              from input layer all the way to output layer."
              id="layers">
              <div class="invalid-feedback">
                At least three layers are required and every number has to be greater than zero.
                Please provide them in comma separated format.
              </div>
            </div>
          </div>
          <div class="row mb-3">
            <label for="activationfunctions" class="col-sm-4 col-form-label">Activation Function</label>
            <div class="col-sm-8">
              <select class="form-select border border-secondary" aria-label="Select an activation function" id="af"
              onchange="afSelection(value)">
                <option value="empty" selected>Select an activation function</option>
                <option value="binarystep">BinaryStep</option>
                <option value="linear">Linear</option>
                <option value="sigmoid">Sigmoid</option>
                <option value="relu">ReLu</option>
                <option value="tanh">Tanh</option>
                <option value="custom">Create your own</option>
              </select>
              <div class="invalid-feedback">
                Select activation function from provided list or provide your own.
              </div>
            </div>
          </div>

          <div id="customaf" class="d-none">

          
          <div class="row mb-3">
            <label>Provide your own activation function below</label>
          </div>

          <div class="row mb-3">
            <label for="name" class="col-sm-4 col-form-label">Name of function</label>
            <div class="col-sm-8">
              <input type="text" class="form-control border border-secondary" data-toggle="tooltip" 
              data-placement="top" 
              title="Provide name for your activation function"
              id="name">
              <div class="invalid-feedback">
                Name is required for activation function.
              </div>
            </div>
          </div>

          <div class="row mb-3">
            <label for="name" class="col-sm-4 col-form-label">Function</label>
            <div class="col-sm-8">
              (x)=>{
              <textarea class="form-control border border-secondary" rows="2" 
              data-toggle="tooltip" data-placement="top" 
              title="Complete provided function in JavaScript. This is your implementation for
              activation function."
              id="funcimpl">//write your implementation here 
              </textarea>
              }
              <div class="invalid-feedback">
                Write your implementation for activation function in JS. Your method should also return 
                a value.
              </div>
            </div>
          </div>
          <div class="row mb-3">
            <label for="name" class="col-sm-4 col-form-label">Derivative function</label>
            <div class="col-sm-8">
              (y) => {
              <textarea  class="form-control border border-secondary" rows="2" 
              data-toggle="tooltip" data-placement="top" 
              title="Complete provided function in JavaScript. This is your implementation for
              derivative of activation function."
              id="dfunc">//write your implementation here
              </textarea>
              }
              <div class="invalid-feedback">
                Write your implementation for derivative of activation function in JS. 
                Your method should also return a value.
              </div>
            </div> 
          </div>
        </div>  
          <button type="submit" class="btn btn-secondary">Create</button>
          <span id="create-inprogress" class="badge text-bg-info d-none">Inprogress...</span>
          <span id="create-completed" class="badge text-bg-success d-none">Completed</span>
          <span id="create-failed" class="badge text-bg-danger d-none">Failed</span>
        </form>
      </div>
      
      <div class="col p-2 border border-secondary">
        <h6>Train/Test Neural Network</h6>
        <form novalidate onsubmit="trainButtonPressed(event)"> 
          <div class="row mb-3">
            <label for="epoch" class="col-sm-4 col-form-label">Epoch</label>
            <div class="col-sm-8">
              <input type="number" class="form-control border border-secondary" 
              data-toggle="tooltip" data-placement="top" 
              title="Provide number here. This represents the number of iteration of training."
              id="epoch">
              <div class="invalid-feedback">
                Number of epoch is required and it has to be greater than zero.
              </div>
            </div>
          </div>
          <div class="row mb-3">
            <label for="learningrate" class="col-sm-4 col-form-label">Learning Rate</label>
            <div class="col-sm-8">
              <input type="text" class="form-control border border-secondary" 
              data-toggle="tooltip" data-placement="top" 
              title="Please provide learning rate. Value can be between 0.0 and 1.0"
              id="learningrate">
              <div class="invalid-feedback">
                Learning rate is required and it has to be between 0.0 and 1.0.
              </div>
            </div>
          </div>
          <div class="row mb-3">
            <label for="trainingdata" class="col-sm-4 col-form-label">Training Data</label>
            <div class="col-sm-8">
              <input type="text" class="form-control border border-secondary" 
              data-toggle="tooltip" data-placement="top" 
              title="Training data needs to be in following format. 
              [ {'X': [], 'Y': []} ]. Here size of X should match with number of nodes in your input layer and 
              size of Y should match with number of node in your output layer. You can also upload json file
              representing your training data."
              id="trainingdata">
              <input class="form-control border border-secondary mt-1" accept="json" type="file" id="trainingfile">
              <div class="invalid-feedback">
                Training data is required and it has to be in "[ {'X': [], 'Y': []} ]" format. Size of X should be
                same as number of nodes in input layer and size of Y should be same as number of nodes in output
                layer. In case of file input, only json files are accepted.
              </div>
            </div>
          </div>        
          <button type="submit" class="btn btn-secondary">Train</button>
          <span id="train-inprogress" class="badge text-bg-info d-none">Inprogress...</span>
          <span id="train-completed" class="badge text-bg-success d-none">Completed</span>
          <span id="train-failed" class="badge text-bg-danger d-none">Failed</span>
        </form>
        <form novalidate onsubmit="testButtonPressed(event)">
          <div class="row mb-3">
            <label for="learningrate" class="col-sm-4 col-form-label">Testing Data</label>
            <div class="col-sm-8">
              <input type="text" class="form-control border border-secondary" 
              data-toggle="tooltip" data-placement="top" 
              title="Testing data needs to be in following format. 
              [ {'X': []}]. Here size of X should match with number of nodes in your input layer.
              You can also upload json file representing your testing data."
              id="testingdata">
              <input class="form-control border border-secondary mt-1" accept="json" type="file" id="testingfile">
              <div class="invalid-feedback">
                Testingg data is required and it has to be in "[ {'X': [], 'Y': []} ]" format. Y value is optional
                for testing. In case of file, only json files are accepted.
              </div>
            </div>
          </div>
          <div class="row mb-3">
            <div class="col">
              <button type="submit" class="btn btn-secondary">Test</button>
              <span id="test-inprogress" class="badge text-bg-info d-none">Inprogress...</span>
              <span id="test-completed" class="badge text-bg-success d-none">Completed</span>
              <span id="test-failed" class="badge text-bg-danger d-none">Failed</span>
            </div>
            <div class="col">
              <button class="btn btn-secondary d-none" id="download-test-result"  onclick="downloadTestResult()">Download Test Result</button>
            </div>
          </div> 
        </form>
      </div>
    </div>
    <hr />
    <div class="row mb-3">
      <h4>Visualization</h4>
      <div class="row">
        <div>
          <div class="form-check form-check-inline">
            <input class="form-check-input" type="radio" name="vis-option" id="train-data-radio" value="train" onclick="trainVisClicked()">
            <label class="form-check-label" for="train-data">Train</label>
          </div>
          <div class="form-check form-check-inline">
            <input class="form-check-input" type="radio" name="vis-option" id="test-data-radio" value="test" onclick="testVisClicked()">
            <label class="form-check-label" for="test-data">Test</label>
          </div>
        </div>
        <hr/>
        
        <div class="col overflow-scroll" id="train-vis">
          
          <select class="form-select border border-secondary mb-3" aria-label="Select an Epoch for visialization" id="visualEpoch"
          onchange="visualEpochChange(value)">
            <option value="empty" selected>Select an epoch</option>
          </select>
          <select class="form-select border border-secondary mb-3" aria-label="Select a training data for visualization" id="visualTrainingData"
          onchange="visualTraningDataChange(value)">
            <option value="empty" selected>Select a training data</option>
          </select>
          <p>Steps: <span id="trainingStepLink"></span></p>


          <p>
            <button type="button" class="btn btn-link" data-bs-toggle="collapse" data-bs-target="#collapseExample" 
            aria-expanded="false" aria-controls="collapseExample">Steps Details</button>
          </p>
          <div class="collapse" id="collapseExample">
            <div class="card card-body overflow-scroll" id="trainingStepDetails">
            </div>
          </div>
        </div>
        <div class="col overflow-scroll" id="test-vis">
          <select class="form-select border border-secondary mb-3" aria-label="Select a testing data for visualization" id="visualTestingData"
          onchange="visualTestingDataChange(value)">
            <option value="empty" selected>Select a testing data</option>
          </select>
          <p>Steps: <span id="testingStepLink"></span></p>

          <p>
            <button type="button" class="btn btn-link" data-bs-toggle="collapse" data-bs-target="#testingStepDetailsCollapsable" 
            aria-expanded="false" aria-controls="testingStepDetailsCollapsable">Steps Details</button>
          </p>
          <div class="collapse" id="testingStepDetailsCollapsable">
            <div class="card card-body overflow-scroll" id="testingStepDetails">
            </div>
          </div>
        </div>
      </div>
    </div>
    </div>
    <div style="overflow:scroll; height:900px; width:100%;">
      <svg id="nnVisualization" xmlns="http://www.w3.org/2000/svg"></svg>
    </div>
    <hr id="provideddataset"/>
    <div>
      <h4>Sample Dataset</h4>
      <p class="lead">As a demonstrations, three data sets has been provided. You can find each of them below which 
        also helps you fill all necessary inputs so that you can easily create neural network, train it and test it. 
        These three datasets are very different from each other and also serve as evidence that our neural net works with various datasets. 
      </p>
      <hr/>
      <h5>XOR</h5>
      <p class="lead">This dataset actually holds result for Mathematical XOR operations. You don't really need neural network to calculate 
        value for xor function. We included here as a sample dataset because it is very simple and easy to understand. XOR dataset is nothing 
        but a simple json data below that we are using for training and testing. <br />
        <code>[ {"X": [ 0, 0 ], "Y":[0]}, {"X": [ 1, 0 ], "Y":[1]}, {"X": [0, 1 ], "Y":[1]}, {"X": [ 1, 1 ], "Y":[0]} ]</code> <br/>
        Full Input Details: <br/>
        <b>Layers</b> : [2,5,3,1]<br/>
        <b>Activation Function</b> : Sigmoid<br/>
        <b>Epoch</b> : 300000<br/>
        <b>Learning Rate</b> : 0.01<br/>
        <b>Training Data</b> : <a href="./sajilonet/spec/data/xor/train.json">XOR training data</a><br/>
        <b>Testing Data</b> : <a href="./sajilonet/spec/data/xor/test.json">XOR testing data</a> <br/>
      </p>
      <hr/>
      <h5>Iris flower</h5>
      <p class="lead">This dataset was borrowed from <a href="https://archive.ics.uci.edu/ml/datasets/iris">here</a>. It is that same classic Iris
        flower dataset that you find every other neural network 
        tutorial and documentation. A single data for this dataset looks like this. <br />
        <code>{"X": [5.1,3.5,1.4,0.2],"Y":[1,0,0]}</code> <br />
        Here X holds following attribute of a flower in order. <code>sepal length in cm, sepal width in cm, petal length in cm,
        petal width in cm</code>. And Y holds flower species. There were three flower species in the datasets as follows.
        <code>Iris Setosa, Iris Versicolour, Iris Virginica</code>. In our dataset, Y value has been normalized so that we can 
        better represent it as follows. <br />
        Iris-setosa is normalized to [1, 0, 0].  <br />
        Iris-versicolor is normalized to [0, 1, 0]. <br />
        Iris-virginica is normalized to [0, 0, 1]. <br />
        Full Input Details: <br/>
        <b>Layers</b> : [4,10,5,3]<br/>
        <b>Activation Function</b> : Sigmoid<br/>
        <b>Epoch</b> : 100000<br/>
        <b>Learning Rate</b> : 0.01<br/>
        <b>Training Data</b> : <a href="./sajilonet/spec/data/iris/train.json">Iris flower training data</a><br/>
        <b>Testing Data</b> : <a href="./sajilonet/spec/data/iris/test.json">Iris flower testing data</a>  <br/>
      </p> 
      <hr/>
      <h5>Handwriting</h5>
      <p class="lead">This is our largest and most complicated sample dataset. This was originally borrowed from 
        <a href="https://pjreddie.com/projects/mnist-in-csv/">here</a>. A single data for this dataset looks like this. <br />
        <code>{"Y":[0,1,0,0,0,0,0,0,0,0],"X":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.14901960784313725,0.996078431372549,0.42745098039215684,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.3411764705882353,0.9882352941176471,0.3215686274509804,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.5294117647058824,0.9450980392156862,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.17647058823529413,0.9568627450980393,0.5882352941176471,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.32941176470588235,0.996078431372549,0.24705882352941178,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.792156862745098,0.8745098039215686,0.043137254901960784,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.12549019607843137,0.996078431372549,0.8470588235294118,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.37254901960784315,0.996078431372549,0.7647058823529411,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.5490196078431373,0.996078431372549,0.30196078431372547,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.2235294117647059,0.9294117647058824,0.803921568627451,0.03137254901960784,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.48627450980392156,1,0.6470588235294118,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.6705882352941176,0.996078431372549,0.3176470588235294,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.09411764705882353,0.9098039215686274,0.8431372549019608,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.47058823529411764,0.996078431372549,0.6235294117647059,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.592156862745098,0.996078431372549,0.5568627450980392,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.8941176470588236,0.996078431372549,0.25882352941176473,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.23921568627450981,0.984313725490196,0.996078431372549,0.25882352941176473,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.5529411764705883,0.996078431372549,0.803921568627451,0.011764705882352941,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.0392156862745098,0.8431372549019608,0.996078431372549,0.4745098039215686,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.0196078431372549,0.7764705882352941,0.6901960784313725,0.0392156862745098,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}, 
        </code><br />
        As you see this dataset is quite large. This one is actually a normalized one. Here Y holds one of the following numbers;<code> 0,1,2,3,4,5,6,7,8,9</code> 
        which has been normalized to matrix so that we can better represet it as follows. <br/>
        0 is normalized to [1,0,0,0,0,0,0,0,0,0]. <br />
        1 is normalized to [0,1,0,0,0,0,0,0,0,0]. <br />
        2 is normalized to [0,0,1,0,0,0,0,0,0,0] and so on.<br />
        Here X holds the pixel value for 28 x 28 pixels representation of the handwritten image. Original dataset had pixel values for 
        X ranging from 0 to 255 which has been normalized by basically dividing them by 255.<br/>
        Full Input Details: <br/>
        <b>Layers</b> : [784, 1000, 100, 10]<br/>
        <b>Activation Function</b> : Sigmoid<br/>
        <b>Epoch</b> : 5000 (Please decrease this number if it is taking too long to train)<br/>
        <b>Learning Rate</b> : 0.01 (Please increase this number if it is taking too long to train)<br/>
        <b>Training Data</b> : <a href="./sajilonet/spec/data/handwriting/iter-2/train.json">Handwriting training data</a><br/>
        <b>Testing Data</b> : <a href="./sajilonet/spec/data/handwriting/iter-2/test.json">Handwriting testing data</a><br/>
      </p> 
    </div>
    <div>
  </div>

  <hr />

  <footer class="mt-auto text-50 text-center">
    <p>eyenet for you, by <a href="https://github.com/paudelbikram" class="text-dark">@paudelbikram</a>.</p>
  </footer>
</div>
    <script src="./assets/dist/js/sajilonet.js"></script>
    <script src="./assets/dist/js/bootstrap.bundle.min.js"></script>
    <script src="./assets/js/eyenet.js"></script>
    <script src="./assets/js/d3.v7.min.js"></script>
  </body>
</html>
